# Parsing

## Modules overview

Parsing Prolog terms and theories is the purpose of the `parser-core` and `parser-theory` modules, respectively.
Both modules leverage on ANTLR for parsing strings, behind the scenes, but they only expose an ANTLR-agnostic public API.
Users of 2P-Kt will only rely on types and methods from these modules to parse their Prolog strings.
In principle, if the ANTLR technology is replaced in the future, the public API of the `parser-core` and `parser-theory` 
modules should not change at all.

ANTLR is a parser generator capable of producing Java or JavaScript (JS) code, i.e., platform-specific sources.
Any parser generated by ANTLR requires a _runtime_ library to actually function in production.
There are many platform-specific _runtime_ libraries (or simply "runtimes", henceforth).
Of course, Java-based parser require the Java runtime (that is, a Java library), whereas JS-based parsers require the JS
runtime, (that is, a JS library). 

To handle such complexity, we introduced two more modules, namely, `parser-jvm` and `parser-js`.
They are two Kotlin platform-specific projects.
In particular, `parser-jvm` is a Kotlin/JVM project, whereas `parser-js` is a Kotlin/JS project.
They are to be considered _implementation_ modules and they must only depend on their respective ANTLR runtime.
Accordingly, they must NOT depend on any other module in 2P-Kt.

## Proposed Work plan

1. Understand the architecture and rationale of parsing in [2P-classic](https://gitlab.com/pika-lab/tuprolog/2p)
    * Consider both modules `parser` and `core`
    
0. Describe the architecture, rationale and functioning by extending this page & producing
    * Then check your comprehension by interacting with the teachers

0. Define a suite of platform independent tests to be placed in `parser-core/commonMain/test` and `parser-theory/commonMain/test`
    * You can take inspiration from tests in 2P-classic's `core` and `parser` modules
    * Ensure the test suites are ok by interacting with the teachers

0. Proceed by reproducing the parsing strategy of 2P-classic in module `parser-jvm` and `parser-core`
    * Notice that some ANTLR-related code has already been copy-pasted & adapted in `parser-jvm`

0. Ensure tests are satisfied for JVM parsing

0. Proceed by reproducing the parsing strategy of 2P-classic in module `parser-js` and `parser-core`
    * Notice that some ANTLR-related code has already been copy-pasted & adapted in `parser-js`

0. Ensure tests are satisfied for JS parsing

0. Document and describe the produced code and its rationale using kotlindoc and this page
